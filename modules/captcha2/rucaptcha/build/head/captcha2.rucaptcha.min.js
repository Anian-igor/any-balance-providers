'use strict';class RuCaptcha{constructor(b){this.key=b;this.baseurl="https://rucaptcha.com/"}async recognizeRecaptcha2(b,a,c){return await this.sendToRecognition({method:"userrecaptcha",googlekey:b,pageurl:a,userAgent:c})}async sendToRecognition(b){var a=1;do await AnyBalance.trace("Отправка капчи на распознавание, попытка "+a),1<a&&await AnyBalance.sleep(5E3),b=await AnyBalance.requestPost(this.baseurl+"in.php",joinObjects({key:this.key,soft_id:"1351"},options)),await AnyBalance.trace("Статус принятия капчи: "+
b.getText());while(/ERROR_NO_SLOT_AVAILABLE/.test(b.getText())&&5>a++);a=getParam(b.getText(),/^OK\|(\S+)/);if(!a)throw new AnyBalance.Error("Не удалось отправить капчу на распознавание! "+b.getText());return a}async waitForResult(b){let a,c=1;do{try{a=await AnyBalance.requestGet(this.baseurl+"res.php?"+createUrlEncodedParams({key:this.key,action:"get",id:b}));var d=a.getLastStatusCode();if(400<=d)throw new AnyBalance.Error(d+" "+a.getLastStatusString());if(!/CAPCHA_NOT_READY/.test(a))break}catch(e){if(await AnyBalance.trace("Ошибка проверки статуса капчи (попытка "+
c+"): "+e.message),5<=c++)throw e;}await AnyBalance.sleep(5E3)}while(1);b=getParam(a.getText(),/^OK\|([\s\S]*\S)/);if(!b)throw new AnyBalance.Error("Не удалось распознать капчу: "+a.getText());return b}};
